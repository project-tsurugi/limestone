# レプリケーション最小構成の通信プロトコルに関するメモ

[レプリケーション最小構成の通信プロトコル](https://nautilus-technologies.app.box.com/file/1798577910013)に関するメモです。


### 共通データ構造

ackとerrorにどのメッセージに対するAckなのかの情報がないのは、
必ずackが返るプロトコルだからか。


### TCP ソケットのステート

これは、通信プロトコル？、マスタとレプリカがソケットチャネルを管理するステータス？

=> ステートマシンのステートのようだ。
=> 実装上、サーバ側でう少しステータスが増えるかも。
=> 通信プロトコルで流れるステータスならこれでOK


### プロトコル：ログエントリ送付

複数のエントリをまとめて送ることを想定しているようだ。
その想定をしていなかった。


### プロトコル：ログチャネル書き出し

fsyncの呼び出したときにAckを返すのか、
fsyncが終了したときにackを返すのか => たぶんこっち





